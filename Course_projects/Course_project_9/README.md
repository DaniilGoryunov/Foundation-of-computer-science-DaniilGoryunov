 # Отчёт по курсовой работе №9 по курсу “Фундаментальная информатика”

Студент группы: М80-108Б-22 Горюнов Даниил Владимирович, № по списку 4 

Контакты e-mail: dania.goryunow2013@yandex.ru

Работа выполнена: «2» июня 2023г.

Преподаватель: асп. каф. 806 Сахарин Никита Александрович

Входной контроль знаний с оценкой _______________________

Отчет сдан «2» июня 2023 г., итоговая оценка ______

Подпись преподавателя ___________


## 1. Тема
Сортировка и поиск
## 2. Цель работы
Составить программу на языке Си с использованием процедур и функций для сортировки таблицы заданным методом и двоичного поиска по ключу в таблице
## 3. Задание
Программа должна вводить значения элементов неупорядоченной таблицы и проверять работу процедуры сортировки в трех случаях: (1) элементы таблицы с самого начала упорядочены; (2) элементы таблицы расставлены в обратном порядке; (3) элементы таблицы не упорядочены. В последнем случае можно использовать встроенные процедуры генерации псевдослучайных чисел

Для каждого вызова процедуры сортировки необходимо печатать исходное состояние таблицы и результаты сортировки. После выполнения сортировки программа должна вводить ключи и для каждого из них выполнять поиск в упорядоченной таблице с помощью процедуры двоичного поиска и печатать найденные элементы, если они присутствуют в таблице.
В процессе отладки и тестирования рекомендуется использовать команды обработки текстовых файлов ОС UNIX и переадресацию ввода-вывода. Тестовые данные необходимо заранее поместить в текстовые файлы. В качестве текста для записей таблицы взять изображение ASCII-графики. Каждый элемент таблицы, содержащий ключ и текст записи, распечатывать в отдельной строке

Метод сортировки: Шейкер сортировка

Структура таблицы: тип ключа - смешанный (9 байт), хранение ключа и данных - отдельно, минимальное число элементов таблицы - 13
## 4. Оборудование:
Процессор: Apple M1

ОП: 8192 МБ

НМД: 512 ГБ  

Монитор: Retina c диагональю 13,3 дюйма разрешение 2560×1600 пикселей (227 пикселей)
## 5. Программное обеспечение:
Операционная система семейства: MacOS

Система программирования: VS code
## 6. Идея, метод, алгоритм решения задачи (в формах: словесной, псевдокода, графической [блок-схема, диаграмма, рисунок, таблица] или формальные спецификации с пред- и постусловиями)

## 7. Сценарий выполнения работы [план работы, первоначальный текст программы в черновике (можно на отдельном листе) и тесты либо соображения по тестированию]. 
```c:/Course_projects/Course_project_8/main.c
//шейкер сортировка; ключ - смешанный; хранятся отдельно
#include "headers/key.h"
#include <stdbool.h>
#include <stdio.h>

typedef struct {
    key k;
    char val[99];
} map;

bool read_keys(FILE* f, int n, map* m) {
    for (int i = 0; i < n; i++) {
        if (fread(&m[i].k, sizeof(key), 1, f) != 1) {
            return false;
        }
    }
    return true;
}

bool read_art(FILE* f, int n, map* m) {
    for (int i = 0; i < n; i++) {
        if (fread(&m[i].val, sizeof(char[99]), 1, f) != 1) {
            return false;
        }
    }
    return true;
}

void cocktail_sort(int table_size, map* m){
    int left_border = 0, right_border = table_size - 1;
    map tmp;
    while(left_border <= right_border){
        for (int i = left_border; i < right_border; ++i){
            if (keycmp(m[i].k, m[i + 1].k) > 0){
                tmp = m[i];
                m[i] = m[i + 1];
                m[i + 1] = tmp;
            }
        }
        --right_border;
        for (int i = right_border; i > left_border; --i){
            if (keycmp(m[i].k, m[i - 1].k) < 0){
                tmp = m[i];
                m[i] = m[i - 1];
                m[i - 1] = tmp;
            }
        }
        ++left_border;
    }
}

void print_art(int n, map* m) {
    for (int i = 0; i < n; i++) {
        printf("%d%c ", m[i].k.num, m[i].k.letter);
        printf("%s\n", m[i].val);
    }
}

key get_key() {
    key k;
    scanf("%d%c", &k.num, &k.letter);
    return k;
}

int binary_search(key k, int n, map* m) {
    int mid = n / 2;
    int low = 0, high = n - 1;
    while (keycmp(m[mid].k, k) != 0 && low <= high) {
        if (keycmp(k, m[mid].k) > 0) {
            low = mid + 1;
        } else {
            high = mid - 1;
        }
        mid = low + (high - low) / 2;
    }
    if (low > high) {
        return -1;
    } else {
        return mid;
    }
}

int main(int argc, char* argv[]) {
    if (argc != 3){
        fprintf(stderr, "Wrong number of args!\n");
        return 1;
    }
    FILE* art = fopen(argv[1], "rb");
    if (art == NULL) {
        fprintf(stderr, "Can't open the second file!");
        return 2;
    }
    FILE* keys = fopen(argv[2], "rb");
    if (keys == NULL) {
        fprintf(stderr, "Can't open the first file!");
        return 2;
    }
    int n;
    if (fread(&n, sizeof(int), 1, keys) != 1) {
        fprintf(stderr, "Read number of elems error!\n");
        return 3;
    }
    map m[n];
    if (!read_keys(keys, n, m)) {
        fprintf(stderr, "Read elems error!\n");
        return 4;
    }
    if (!read_art(art, n, m)) {
        fprintf(stderr, "Read elems error!\n");
        return 4;
    }
    fclose(keys);
    fclose(art);
    print_art(n, m);
    cocktail_sort(n, m);
    printf("\n");
    print_art(n, m);
    while (true) {
        printf("Enter key:\n");
        key user = get_key();
        int idx = binary_search(user, n, m);
        if (idx < 0) {
            printf("Key not found!\n");
        } else {
            printf("%s\n", m[idx].val);
        }
    }

    return 0;
}
```
Пункты 1-7 отчета составляются сторого до начала лабораторной работы.
Допущен к выполнению работы.  
Подпись преподавателя _____________________
## 8. Распечатка протокола 
```
admin@MacBook-Pro-2 sources % ./kp9 ascii_shaked.bin keys_shaked.bin
18C          :                  `"--'             |    `-.     \
13B ".                                       d$"             _.'  |
23C :    `-  ...........,                   | /  .'
16A .'|$u$$|          |$$,$$|           |  <            _.-'
26B |         ``:::::::'       .            |<    `.
17B | `:$$:'          :$$$$$:           `.  `.       .-'
23B /`-.                                  `.  /   /
11B "$$b        `--.                          ___.---uuudP
13A "$b          -'            `-.-'            $$$"              .'|
13C `.   /                              ..."             .'     |
38C |     .:::::::::::`.         /
19B :##.       ==             .###.       `.      `.    `\
13D `./                           ..::-'            _.'       |
30C `.  .'                   :    /:'       |-'MMMM.-'
14A /                         .:::-'            .-'         .'
23A \                                xXXX'|    /   ./
42B `',:                 :    .'
14B :                          ::''\          _.'            |
27C |             ```          |           x| \ `.:``.
32B |  |                   .'   /'        .'MMM.-'
20B |##:                      :###:        |        >     >
35B |                     `'            |tbap\
22C \                                   xXX|     /    ./
10A quu..__
36A \                                  :MM.-'
38A \.               `.            /
21A |#'     `..'`..'          `###'        x:      /     /
15A : /'$$|           .@"$\           `.   .'              _.-'
38B /     .:::::::.. :           /
41A /   .''               >::'  /
42C `:.:' 
30A |                         .'    /'   xXX|  `:`M`M':.
12A `$$b           `.__.------.__     __.---'      $$$$"              .
11A $$$b  `---.__
40A |   .:::------------\       /
30B |    |                    ;    /:' xXXX'|  -'MMMMM:'
14C .' .-.             .-.           `.      .'               |
37A \                 |              .''
35A `'`'                   :  ,'          |MMM<

10A quu..__
11A $$$b  `---.__
11B "$$b        `--.                          ___.---uuudP
12A `$$b           `.__.------.__     __.---'      $$$$"              .
13A "$b          -'            `-.-'            $$$"              .'|
13B ".                                       d$"             _.'  |
13C `.   /                              ..."             .'     |
13D `./                           ..::-'            _.'       |
14A /                         .:::-'            .-'         .'
14B :                          ::''\          _.'            |
14C .' .-.             .-.           `.      .'               |
15A : /'$$|           .@"$\           `.   .'              _.-'
16A .'|$u$$|          |$$,$$|           |  <            _.-'
17B | `:$$:'          :$$$$$:           `.  `.       .-'
18C          :                  `"--'             |    `-.     \
19B :##.       ==             .###.       `.      `.    `\
20B |##:                      :###:        |        >     >
21A |#'     `..'`..'          `###'        x:      /     /
22C \                                   xXX|     /    ./
23A \                                xXXX'|    /   ./
23B /`-.                                  `.  /   /
23C :    `-  ...........,                   | /  .'
26B |         ``:::::::'       .            |<    `.
27C |             ```          |           x| \ `.:``.
30A |                         .'    /'   xXX|  `:`M`M':.
30B |    |                    ;    /:' xXXX'|  -'MMMMM:'
30C `.  .'                   :    /:'       |-'MMMM.-'
32B |  |                   .'   /'        .'MMM.-'
35A `'`'                   :  ,'          |MMM<
35B |                     `'            |tbap\
36A \                                  :MM.-'
37A \                 |              .''
38A \.               `.            /
38B /     .:::::::.. :           /
38C |     .:::::::::::`.         /
40A |   .:::------------\       /
41A /   .''               >::'  /
42B `',:                 :    .'
42C `:.:' 
Enter key:
26B
|         ``:::::::'       .            |<    `.
Enter key:
38C
|     .:::::::::::`.         /
Enter key:
10A
quu..__
Enter key:
42C
`:.:' 
```
## 9. Дневник отладки должен содержать дату и время сеансов отладки и основные события (ошибки в сценарии и программе, нестандартные ситуации) и краткие комментарии к ним. В дневнике отладки приводятся сведения об использовании других ЭВМ, существенном участии преподавателя и других лиц в написании и отладке программы.

| № |  Лаб. или дом. | Дата | Время | Событие | Действие по исправлению | Примечание |
| ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| 1 | дом. | 10.06.23 | 18:00 | Дом родной | - | - |
## 10. Замечания автора по существу работы — Написание команд для отработки навыков работы в ОС UNIX.
[Контест](https://codeforces.com/contest/1814/submission/201016894)

[Дорешка](https://codeforces.com/contest/1814/submission/202877281)
## 11. Выводы
После выполнения работы, были получены навыки обощенного программирования на C посредством void-указателей и memcpy, написания макросов, а так же написания эффективных сортировок и поисков. Улучшено понимание механизмов выделения памяти в C, а именно, стало очевидным различие между аллокацией "в стеке" (автоматическая) и "в куче" (динамическая).
Недочёты при выполнении задания могут быть устранены следующим образом: —

Подпись студента _________________